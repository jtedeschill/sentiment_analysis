
name: Create Automated Pull Request

on:
  push:
    branches:
      - develop

jobs:
  create_pr:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4


      - name: Get commits
        id: get_commits
        run: |
            git fetch --no-tags --prune --depth=1 origin +refs/heads/develop:refs/remotes/origin/develop
            git log --pretty=format:"%s" origin/develop..HEAD > commits.txt
            echo "::set-output name=commits::$(cat commits.txt)"

      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v3
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          branch: main
          base: develop
          title: ${{ github.event.head_commit.message }}
          # Generate the PR body by listing all commits in the develop branch
          body: |
            This PR was generated by a GitHub Action.
            Title of the PR: ${{ github.event.head_commit.message }}
            Commits in the PR:
              ${{ steps.get_commits.outputs.commits }}
                
          draft: true
          labels: |
              automerge
              automerge:merge
          reviewers: |
              jrtedeschi


## Fazendo testes com o pull request